<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Snake</title>
<style>
  * { margin:0; padding:0; box-sizing:border-box; }
  body {
    font-family: 'Courier New', monospace;
    display: flex; flex-direction: column;
    align-items: center; justify-content: center;
    min-height: 100vh;
    transition: background 0.4s;
  }
  h1 { font-size:1.7rem; margin-bottom:8px; transition: all 0.3s; }

  /* TEMA SELECTOR */
  #theme-bar {
    display: flex; gap: 8px; margin-bottom: 10px;
  }
  .t-btn {
    padding: 6px 16px; border-radius: 20px; border: 2px solid transparent;
    cursor: pointer; font-size: 0.8rem; font-family: 'Courier New', monospace;
    font-weight: bold; transition: all 0.2s;
  }
  .t-btn.active { transform: scale(1.1); }

  #info {
    display: flex; gap: 16px; margin-bottom: 10px;
    font-size: 0.85rem; padding: 6px 20px;
    border-radius: 20px; border: 2px solid;
    transition: all 0.3s;
  }
  #canvas-wrap { position: relative; }
  canvas { display: block; transition: border-color 0.3s, box-shadow 0.3s; }
  #overlay {
    position:absolute; inset:0;
    display:flex; flex-direction:column;
    align-items:center; justify-content:center; gap:12px;
  }
  #overlay h2 { font-size:1.4rem; }
  button#startBtn {
    padding:10px 28px; font-size:1rem;
    font-family:'Courier New',monospace;
    letter-spacing:1px; cursor:pointer;
    transition: all 0.2s;
  }
  #tip { font-size:0.72rem; }
</style>
</head>
<body>
<h1 id="title">SNAKE</h1>
<div id="theme-bar">
  <button class="t-btn active" onclick="setTheme('neon')" id="btn-neon">âš¡ NEON</button>
  <button class="t-btn" onclick="setTheme('kitty')" id="btn-kitty">ðŸŽ€ KITTY</button>
  <button class="t-btn" onclick="setTheme('retro')" id="btn-retro">ðŸ‘¾ RETRO</button>
</div>
<div id="info">
  SCORE: <b id="score">0</b> | RECORDE: <b id="high">0</b> | LEVEL: <b id="level">1</b>
</div>
<div id="canvas-wrap">
  <canvas id="c" width="400" height="400"></canvas>
  <div id="overlay"></div>
</div>

<script>
const canvas = document.getElementById('c');
const ctx = canvas.getContext('2d');
const CELL=20, COLS=20, ROWS=20;

const THEMES = {
  neon: {
    body: '#0d1117',
    bodyBg: '#0d1117',
    bgDot: null,
    grid: '#161b22',
    cellBg: '#0d1117',
    snakeHead: '#00ff88',
    snakeTail: '#008844',
    snakeTail2: '#00cc66',
    border: '2px solid #00ff88',
    shadow: '0 0 20px #00ff8855',
    infoBorder: '#00ff88',
    infoBg: 'transparent',
    infoColor: '#00ff88',
    overlayBg: '#0d1117cc',
    overlayTitle: '#00ff88',
    overlayText: '#8b949e',
    btnBg: 'transparent',
    btnBorder: '2px solid #00ff88',
    btnColor: '#00ff88',
    btnRadius: '4px',
    btnShadow: '',
    titleColor: '#00ff88',
    titleShadow: '0 0 10px #00ff88',
    foods: ['âš¡','ðŸ”§','ðŸ’¾','ðŸ“¡','ðŸ–¥ï¸','âŒ¨ï¸','ðŸ”‹','ðŸ›'],
    title: '&lt; SNAKE.EXE /&gt;',
    emoji: 'ðŸ–¥ï¸',
    canvasRadius: '4px',
  },
  kitty: {
    body: '#ffe4f0',
    bodyBg: '#ffe4f0',
    bgDot: '#ffb6d9',
    grid: '#ffe4f0',
    cellBg: '#fff0f8',
    snakeHead: '#ff69b4',
    snakeTail: '#ffb6d9',
    snakeTail2: '#ff85c2',
    border: '4px solid #ff69b4',
    shadow: '0 0 24px #ff69b455',
    infoBorder: '#ffb6d9',
    infoBg: '#fff',
    infoColor: '#ff69b4',
    overlayBg: '#ffe4f0ee',
    overlayTitle: '#ff69b4',
    overlayText: '#ff9dca',
    btnBg: '#ff69b4',
    btnBorder: 'none',
    btnColor: '#fff',
    btnRadius: '25px',
    btnShadow: '0 4px 0 #d44f96',
    titleColor: '#ff69b4',
    titleShadow: '2px 2px 0 #fff, 4px 4px 0 #ffb6d9',
    foods: ['ðŸŽ€','ðŸŒ¸','ðŸ­','â­','ðŸŽ‚','ðŸ’–','ðŸŒº','ðŸ“','ðŸŽ','ðŸ’'],
    title: 'ðŸŽ€ Hello Snake! ðŸŽ€',
    emoji: 'ðŸ±',
    canvasRadius: '16px',
  },
  retro: {
    body: '#1a1a2e',
    bodyBg: '#1a1a2e',
    bgDot: null,
    grid: '#16213e',
    cellBg: '#16213e',
    snakeHead: '#f5a623',
    snakeTail: '#c47d0e',
    snakeTail2: '#e8920f',
    border: '4px solid #f5a623',
    shadow: '0 0 20px #f5a62355',
    infoBorder: '#f5a623',
    infoBg: 'transparent',
    infoColor: '#f5a623',
    overlayBg: '#1a1a2ecc',
    overlayTitle: '#f5a623',
    overlayText: '#a0a8b8',
    btnBg: 'transparent',
    btnBorder: '2px solid #f5a623',
    btnColor: '#f5a623',
    btnRadius: '0px',
    btnShadow: '',
    titleColor: '#f5a623',
    titleShadow: '3px 3px 0 #c47d0e',
    foods: ['ðŸ‘¾','ðŸ•¹ï¸','ðŸŽ®','ðŸ†','ðŸ’£','â¬†ï¸','ðŸ”´','ðŸ’€'],
    title: 'ðŸ‘¾ RETRO SNAKE ðŸ‘¾',
    emoji: 'ðŸ•¹ï¸',
    canvasRadius: '0px',
  }
};

let currentTheme = 'neon';
let snake, dir, nextDir, food, foodType, score, hi=0, lvl, loop, running=false;

function setTheme(name) {
  currentTheme = name;
  const t = THEMES[name];

  // body bg
  document.body.style.background = t.bodyBg;
  if (t.bgDot) {
    document.body.style.backgroundImage = `radial-gradient(${t.bgDot} 1px, transparent 1px)`;
    document.body.style.backgroundSize = '20px 20px';
  } else {
    document.body.style.backgroundImage = 'none';
  }

  // title
  const title = document.getElementById('title');
  title.innerHTML = t.title;
  title.style.color = t.titleColor;
  title.style.textShadow = t.titleShadow;

  // info bar
  const info = document.getElementById('info');
  info.style.borderColor = t.infoBorder;
  info.style.background = t.infoBg;
  info.style.color = t.infoColor;

  // canvas
  canvas.style.border = t.border;
  canvas.style.boxShadow = t.shadow;
  canvas.style.borderRadius = t.canvasRadius;

  // theme buttons
  document.querySelectorAll('.t-btn').forEach(b => {
    b.classList.remove('active');
    b.style.background = 'transparent';
    b.style.borderColor = t.infoBorder;
    b.style.color = t.infoColor;
  });
  const active = document.getElementById('btn-'+name);
  active.classList.add('active');
  active.style.background = t.snakeHead;
  active.style.color = name==='kitty'?'#fff':t.body;

  showOverlay('start');
  if (running) draw();
}

function applyBtnStyle(btn) {
  const t = THEMES[currentTheme];
  btn.style.background = t.btnBg;
  btn.style.border = t.btnBorder;
  btn.style.color = t.btnColor;
  btn.style.borderRadius = t.btnRadius;
  btn.style.boxShadow = t.btnShadow;
  btn.style.padding = '10px 28px';
  btn.style.fontSize = '1rem';
  btn.style.fontFamily = "'Courier New', monospace";
  btn.style.cursor = 'pointer';
  btn.style.letterSpacing = '1px';
}

function showOverlay(mode) {
  const t = THEMES[currentTheme];
  const ov = document.getElementById('overlay');
  ov.style.background = t.overlayBg;
  ov.style.borderRadius = t.canvasRadius;

  if (mode==='start') {
    ov.innerHTML = `
      <div style="font-size:3rem">${t.emoji}</div>
      <h2 style="color:${t.overlayTitle}">${mode==='start'?'SNAKE':'FIM!'}</h2>
      <p style="color:${t.overlayText}">Come os itens e nÃ£o bata nas paredes!</p>
      <button id="startBtn" onclick="startGame()">â–¶ JOGAR</button>
      <p id="tip" style="color:${t.overlayText}">Setas / WASD â€¢ Swipe no celular</p>`;
  } else {
    ov.innerHTML = `
      <div style="font-size:2.5rem">${mode==='kitty'?'ðŸ˜¿':'ðŸ’€'}</div>
      <h2 style="color:${t.overlayTitle}">FIM DE JOGO!</h2>
      <p style="color:${t.overlayText}">Score: <b>${score}</b> | Recorde: <b>${hi}</b></p>
      <button id="startBtn" onclick="startGame()">â–¶ JOGAR DE NOVO</button>`;
  }
  applyBtnStyle(document.getElementById('startBtn'));
  ov.style.display = 'flex';
}

function startGame() {
  document.getElementById('overlay').style.display = 'none';
  snake = [{x:10,y:10},{x:9,y:10},{x:8,y:10}];
  dir={x:1,y:0}; nextDir={x:1,y:0};
  score=0; lvl=1;
  spawnFood(); updateInfo();
  clearInterval(loop);
  running=true;
  loop = setInterval(tick, 150);
}

function spawnFood() {
  do { food={x:Math.floor(Math.random()*COLS),y:Math.floor(Math.random()*ROWS)};
  } while(snake.some(s=>s.x===food.x&&s.y===food.y));
  foodType = THEMES[currentTheme].foods[Math.floor(Math.random()*THEMES[currentTheme].foods.length)];
}

function tick() {
  dir=nextDir;
  const head={x:snake[0].x+dir.x,y:snake[0].y+dir.y};
  if(head.x<0||head.x>=COLS||head.y<0||head.y>=ROWS||snake.some(s=>s.x===head.x&&s.y===head.y)){
    gameOver(); return;
  }
  snake.unshift(head);
  if(head.x===food.x&&head.y===food.y){
    score+=10*lvl;
    if(score>=lvl*100){lvl++;clearInterval(loop);loop=setInterval(tick,Math.max(60,150-(lvl-1)*15));}
    spawnFood();
  } else snake.pop();
  updateInfo(); draw();
}

function draw() {
  const t = THEMES[currentTheme];
  ctx.fillStyle = t.cellBg;
  ctx.fillRect(0,0,canvas.width,canvas.height);
  ctx.strokeStyle = t.grid;
  for(let i=0;i<COLS;i++) for(let j=0;j<ROWS;j++) ctx.strokeRect(i*CELL,j*CELL,CELL,CELL);

  snake.forEach((s,i)=>{
    const x=s.x*CELL, y=s.y*CELL;
    ctx.fillStyle = i===0?t.snakeHead:(i%2===0?t.snakeTail:t.snakeTail2);
    ctx.shadowColor = t.snakeHead;
    ctx.shadowBlur = i===0?12:3;
    ctx.beginPath();
    const r = currentTheme==='kitty'?6:currentTheme==='retro'?0:3;
    ctx.roundRect(x+1,y+1,CELL-2,CELL-2,r);
    ctx.fill();
    ctx.shadowBlur=0;

    if(i===0) {
      // olhos
      ctx.fillStyle='#fff';
      const ex1=dir.x>0?10:dir.x<0?3:5, ex2=dir.x>0?13:dir.x<0?7:11;
      const ey=dir.y>0?11:dir.y<0?3:7;
      ctx.fillRect(x+ex1,y+ey,3,3); ctx.fillRect(x+ex2,y+ey,3,3);
      ctx.fillStyle='#333';
      ctx.fillRect(x+ex1+1,y+ey+1,1,1); ctx.fillRect(x+ex2+1,y+ey+1,1,1);
    }
    if(currentTheme==='kitty'&&i>0&&i%4===0){
      ctx.font='10px serif'; ctx.textAlign='center'; ctx.textBaseline='middle';
      ctx.fillText('ðŸŽ€',x+CELL/2,y+CELL/2);
    }
  });

  ctx.font=`${CELL}px serif`;
  ctx.textAlign='center'; ctx.textBaseline='middle';
  ctx.fillText(foodType,food.x*CELL+CELL/2,food.y*CELL+CELL/2+1);
}

function gameOver(){
  running=false; clearInterval(loop);
  if(score>hi) hi=score;
  showOverlay('over');
}

function updateInfo(){
  document.getElementById('score').textContent=score;
  document.getElementById('high').textContent=hi;
  document.getElementById('level').textContent=lvl;
}

document.addEventListener('keydown',e=>{
  const map={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0},
    w:{x:0,y:-1},s:{x:0,y:1},a:{x:-1,y:0},d:{x:1,y:0}};
  const nd=map[e.key];
  if(nd&&!(nd.x===-dir.x&&nd.y===-dir.y)){nextDir=nd;e.preventDefault();}
});

let tx,ty;
canvas.addEventListener('touchstart',e=>{tx=e.touches[0].clientX;ty=e.touches[0].clientY;},{passive:true});
canvas.addEventListener('touchend',e=>{
  const dx=e.changedTouches[0].clientX-tx,dy=e.changedTouches[0].clientY-ty;
  if(Math.abs(dx)>Math.abs(dy)) nextDir=dx>0?{x:1,y:0}:{x:-1,y:0};
  else nextDir=dy>0?{x:0,y:1}:{x:0,y:-1};
  if(nextDir.x===-dir.x&&nextDir.y===-dir.y) nextDir=dir;
},{passive:true});

setTheme('neon');
</script>
</body>
</html>
